import telebot
import requests
import json

# Config рдкрдврд╝реЗрдВ
with open("config.json", "r") as f:
    config = json.load(f)

BOT_TOKEN = config["BOT_TOKEN"]   # рдЕрдкрдирд╛ Telegram bot token
OMDB_KEY = config["OMDB_KEY"]     # рдЕрдкрдирд╛ OMDB API key

bot = telebot.TeleBot(BOT_TOKEN, parse_mode="HTML")

@bot.message_handler(commands=['start'])
def send_welcome(message):
    bot.reply_to(message, "ЁЯОм рдирдорд╕реНрддреЗ! рдореБрдЭреЗ рдХреЛрдИ movie рдХрд╛ рдирд╛рдо рднреЗрдЬреЛ, рдореИрдВ рдЙрд╕рдХреА рдЬрд╛рдирдХрд╛рд░реА рджреВрдБрдЧрд╛ред")

@bot.message_handler(func=lambda msg: True)
def movie_info(message):
    movie = message.text.strip()
    url = f"http://www.omdbapi.com/?t={movie}&apikey={OMDB_KEY}"
    response = requests.get(url).json()

    if response.get("Response") == "True":
        reply = f"""
ЁЯОе <b>{response['Title']}</b> ({response['Year']})
тнР IMDB: {response['imdbRating']}
ЁЯОн Genre: {response['Genre']}
ЁЯОм Director: {response['Director']}
ЁЯУЭ Plot: {response['Plot']}
"""
    else:
        reply = "тЭМ Movie рдирд╣реАрдВ рдорд┐рд▓реА, spelling check рдХрд░реЗрдВред"

    bot.reply_to(message, reply)

print("ЁЯдЦ Bot рдЪрд▓ рд░рд╣рд╛ рд╣реИ...")
bot.infinity_polling()
